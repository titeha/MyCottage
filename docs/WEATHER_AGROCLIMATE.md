# Климат, погода и агроклиматический движок (ядро)

## 1) Зачем
Для РФ различия региона определяют:
- сроки посева/высадки/сбора;
- риск заморозков;
- потребность в поливе (осадки/испаряемость);
- солнечность (рост/вытягивание рассады, перегрев теплицы).

**Зона зимостойкости** — только про зимние минимумы и многолетники. Для огорода нужен **агроклимат** (длина сезона, фактическое тепло/влага/солнце).

## 2) Источники данных (провайдеры)
- прогноз (7–16 дней) + история (хотя бы 90 дней) + (желательно) многолетние ряды;
- переменные: tmin/tmax/tavg, осадки, облачность/ветер (для риска заморозка), ET₀, солнечность/радиация (опционально).

Архитектурно: провайдеры подключаются как плагины (WeatherProvider), чтобы можно было менять источник без переписывания домена.

## 3) Переменные (минимальный набор)
- daily: tmin, tmax, tavg
- precipitation (mm)

Дополнительно (желательно):
- ET₀ (mm) — для водного баланса
- sunshine duration (мин) / shortwave radiation sum — для “солнечности”

## 4) Расчёты

### 4.1 Заморозки
- алерт: если прогноз tmin ночью <= порога (по умолчанию 0°C; настраиваемо)
- уровни:
  - 0…+2: предупреждение (укрыть/перенести рассаду)
  - 0…-2: опасно (обязательные меры)

### 4.2 Вегетация (GDD)
- GDD(base=5): sum(max(0, tavg-5))
- GDD(base=10): sum(max(0, tavg-10))
Используется для:
- уточнения “окна урожая”
- понимания “успеет ли культура/сорт”
- прогресса сезона

### 4.3 Влага (простая модель)
MVP:
- “сколько выпало за 7 дней” (осадки)
- подсказка: если сумма осадков низкая → подумать о поливе

Продвинуто:
- водный баланс: ET₀ - осадки - поливы(из журнала)
- подсказки: “дефицит/профицит влаги”

### 4.4 Профиль сезона (из истории/многолетних рядов)
- дата последнего весеннего заморозка (p50/p80)
- дата первого осеннего заморозка (p50/p20)
- длина безморозного периода
- нормы GDD и осадков по сезону
- (опционально) нормы солнечности/радиации

## 5) Офлайн‑fallback
Если интернета нет:
- используем ручной регион + “климатический профиль по умолчанию” (консервативные окна);
- предупреждения о заморозках/осадках недоступны, но дневник и план участка работают полностью.

