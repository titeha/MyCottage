# Roadmap: “Моя дача” (v0.5)

Дата: 2026-02-22

Дорожная карта оформлена как последовательность релизов.  
Каждый релиз — цель, результат, риски, критерии готовности.

---

## R0 — Репозиторий и каркас проекта
Цель: начать с правильной структуры и документов.

Состав:
- структура репозитория (Android + Cloud + placeholders для iOS/Web);
- консолидированное ТЗ + архитектура;
- черновик модели данных + API;
- docker compose для dev (PostgreSQL + Keycloak + MinIO + backend stub).

Критерий:
- репозиторий можно форкнуть и поднять dev окружение.

---

## R1 — MVP ядра (Android, офлайн‑first) + планшеты
Цель: “дневник дачника” уже полезен без облака.

Функции:
- участок + зоны;
- посадки (культура/дата/зона, сорт текстом);
- календарь задач (ориентировочные даты);
- журнал работ + фото;
- локальные уведомления;
- экспорт/импорт JSON;
- **адаптивный UI** (планшеты: multi‑pane);
- **План участка v1** (схема зон + размещение посадок).

Климат/погода (в ядре, offline fallback):
- профиль участка: регион/координаты (если есть);
- базовые окна сезона (консервативно);
- расчёт “окна урожая” (ориентировочно, по справочнику культур).

Риски:
- UX должен быть быстрый: добавление посадки ≤ 30 секунд.
- корректность уведомлений Android.
- план участка не должен усложнить MVP (схема, не CAD).

Критерии:
- пользователь ведёт дневник весь сезон офлайн.

---

## R1.1 — Погода (быстрый полезный слой)
Цель: дать практические подсказки “здесь и сейчас”.

Функции:
- кэш прогноза 7–10 дней (минимумы/осадки);
- алерт заморозков;
- сумма осадков за 7 дней и подсказка по поливу.

Критерии:
- алерт заморозка приходит заранее и понятен.

---

## R1.2 — Диаграмма сезона (Timeline/Gantt)
Цель: быстро и наглядно видеть сезон по всем культурам.

Функции:
- режим “Диаграмма” как альтернатива календарю;
- строки: посадки; сегменты: рост + окно сбора + ключевые точки;
- горизонтальная прокрутка, zoom (неделя/месяц/сезон);
- фильтры по участку/зоне/культуре; линия “сегодня”.

Критерии:
- диаграмма строится офлайн из локальных данных;
- отображает диапазон сбора (min..max) и открывает карточку посадки по тапу.

---

## R2 — Аккаунт и синхронизация (Cloud Core)
Цель: мульти‑устройство и сохранность данных.

Функции:
- регистрация/логин (OIDC);
- синхронизация сущностей ядра (Site/Zone/Planting/Task/Journal/PlotPlan);
- облачное хранение фото (S3);
- восстановление данных на новом устройстве.

Критерии:
- смена телефона → данные восстановлены.

---

## R2.1 — Подготовка к iOS (без полноценного приложения)
Цель: не “ломать” архитектуру потом.

Функции:
- стабилизировать OpenAPI контракты;
- общий слой моделей (генерация или `shared/`);
- CI: проверка совместимости контрактов.

Критерии:
- контракты пригодны для будущего iOS клиента без переписывания бэкенда.

---

## R3 — Техкарты выращивания + справочник сортов (расширение)
Цель: перейти от “ориентировочных дат” к управляемому уходу.

Функции:
- справочник популярных сортов (минимум по топ‑культурам);
- техкарты выращивания (шаблоны работ) → генерация задач;
- привязка к климату/погоде (окна, переносы).

Критерии:
- пользователь получает “что делать на этой неделе” по выбранным культурам.

---

## R4 — Почва и плодородие (расширение)
Цель: дать план улучшения почвы без опасной агрохимии.

Функции:
- профиль почвы (ручной) + (опционально) почвенная карта;
- ввод лабораторных анализов (с единицами);
- план восстановления плодородия (протоколы) + задачи в календарь;
- севооборот на основе истории посадок.

Критерии:
- пользователь получает понятный план работ на сезон.

---

## R5 — Справочник СЗР/удобрений (расширение)
Цель: “что разрешено” + поиск/фильтры.

Функции:
- справочник препаратов (только разрешённые, с версией каталога);
- поиск по культуре/вредителю/действующему веществу;
- safety‑политика: никаких “смесей” и дозировок без инструкции.

Критерии:
- карточка препарата содержит источник и предупреждения.

---

## R6 — AI‑чат помощник + “ИИ‑наблюдения → задачи”
Цель: превратить ИИ в календарные действия.

Функции:
- чат с контекстом дневника;
- Observation (вредитель/болезнь/дефицит) → Alert → TaskProposals → подтверждение → задачи;
- ссылки на техкарты/справочники.

Критерии:
- ИИ выдаёт не “болтовню”, а план действий и задачи.

---

## R7 — CV модули: болезни/вредители и обрезка
Цель: фото‑помощники.

Функции:
- triage болезней/вредителей по фото (гипотезы + вопросы + безопасный план);
- обрезка: мастер + (позже) подсветка зон на фото.

Критерии:
- низкая уверенность → безопасный fallback и запрос уточнений.

---

## R8 — Web Portal (сообщество + инструменты)
Цель: удержание и рост через контент/комьюнити и удобные “компьютерные” функции.

MVP:
- лендинг + документация
- вход через OIDC
- форум (отдельный движок) + SSO
- план участка на web (read-only → edit позже)
- диаграмма сезона (Timeline) на web

---

## R9 — Заготовки/рецепты
Цель: связать сбор урожая с “что приготовить/законсервировать”.

Функции:
- предложения рецептов при HarvestWindowReached
- список покупок и задачи по заготовкам

---

## R10 — Автоматизация (позже)
Цель: привязать дневник и погоду к устройствам.

Функции:
- интеграция Home Assistant/MQTT
- правила: задача/погода → действие (полив)

---

## R11 — Магазин (позже)
Старт:
- список покупок + партнёрские ссылки
Далее:
- каталог + корзина + оплата (юридика/поддержка)

